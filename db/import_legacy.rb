jsonstring = '[{"time": "2013-07-16 12:07:04","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 12:07:05","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 12:29:30","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 12:52:12","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 13:28:55","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 13:36:51","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 14:38:08","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 15:42:11","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 15:55:52","amount": 0.60,"kind": "water"}, {"time": "2013-07-16 16:58:40","amount": 0.60,"kind": "water"}, {"time": "2013-07-17 11:24:41","amount": 0.60,"kind": "water"}, {"time": "2013-07-17 12:26:39","amount": 0.60,"kind": "water"}, {"time": "2013-07-17 13:12:06","amount": 0.60,"kind": "water"}, {"time": "2013-07-17 13:12:14","amount": 0.60,"kind": "water"}, {"time": "2013-07-17 13:22:05","amount": 0.30,"kind": "coffee"}, {"time": "2013-07-17 14:54:40","amount": 0.60,"kind": "water"}, {"time": "2013-07-17 16:01:25","amount": 0.60,"kind": "water"}, {"time": "2013-07-17 17:14:26","amount": 0.30,"kind": "tea"}, {"time": "2013-07-17 17:16:15","amount": 0.60,"kind": "water"}, {"time": "2013-07-17 17:29:11","amount": 0.60,"kind": "water"}, {"time": "2013-07-18 09:57:38","amount": 0.60,"kind": "water"}, {"time": "2013-07-18 09:57:39","amount": 0.30,"kind": "coffee"}, {"time": "2013-07-18 10:33:57","amount": 0.60,"kind": "water"}, {"time": "2013-07-18 10:37:45","amount": 0.60,"kind": "water"}, {"time": "2013-07-18 11:06:18","amount": 0.60,"kind": "water"}, {"time": "2013-07-18 12:57:59","amount": 0.60,"kind": "water"}, {"time": "2013-07-18 13:50:10","amount": 0.60,"kind": "water"}, {"time": "2013-07-18 15:08:37","amount": 0.60,"kind": "water"}, {"time": "2013-07-18 16:20:42","amount": 0.60,"kind": "water"}, {"time": "2013-07-19 09:32:24","amount": 0.60,"kind": "water"}, {"time": "2013-07-19 10:00:55","amount": 0.60,"kind": "water"}, {"time": "2013-07-19 10:18:29","amount": 0.30,"kind": "coffee"}, {"time": "2013-07-19 11:39:36","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 09:55:23","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 10:16:21","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 10:44:08","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 11:21:49","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 11:40:22","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 11:40:46","amount": 0.30,"kind": "coffee"}, {"time": "2013-07-22 13:29:37","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 15:02:47","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 16:11:09","amount": 0.60,"kind": "water"}, {"time": "2013-07-22 18:12:15","amount": 0.60,"kind": "water"}, {"time": "2013-07-23 10:22:44","amount": 0.60,"kind": "water"}, {"time": "2013-07-23 11:00:05","amount": 0.60,"kind": "water"}, {"time": "2013-07-23 11:00:10","amount": 0.30,"kind": "coffee"}, {"time": "2013-07-23 12:57:02","amount": 0.60,"kind": "water"}, {"time": "2013-07-23 13:36:08","amount": 0.30,"kind": "coffee"}, {"time": "2013-07-23 14:06:19","amount": 0.60,"kind": "water"}, {"time": "2013-07-23 15:49:03","amount": 0.60,"kind": "water"}, {"time": "2013-07-23 16:25:38","amount": 0.60,"kind": "water"}, {"time": "2013-07-24 09:16:42","amount": 0.60,"kind": "water"}, {"time": "2013-07-24 09:44:38","amount": 0.60,"kind": "water"}, {"time": "2013-07-24 09:54:03","amount": 0.60,"kind": "water"}, {"time": "2013-07-24 10:00:54","amount": 0.30,"kind": "coffee"}, {"time": "2013-07-24 15:06:46","amount": 0.60,"kind": "water"}, {"time": "2013-07-25 11:08:51","amount": 0.30,"kind": "coffee"}, {"time": "2013-07-25 11:21:43","amount": 0.60,"kind": "water"}, {"time": "2013-07-25 15:09:07","amount": 0.60,"kind": "water"}]'

tzdiff = 5 #timezone difference

jsondata = JSON.parse(jsonstring)
counter = 0
jsondata.each do |jd|
	#adjust for timezone discrepancy
	jd["time"] = jd["time"][0, 11] + (jd["time"][11, 2].to_i + tzdiff).to_s + jd["time"][13, 20]
	new_record = ConsumedUnit.new
	new_record.amount = jd["amount"]
	new_record.unit = "liters"
	new_record.created_at = jd["time"]
	new_record.consumable_type_id = ConsumableType.select{|ct| ct.name == jd["kind"]}.first.id
	new_record.consumable_object_id = ConsumableObject.select{|co| co.consumable_type.name == jd["kind"]}.first.id
	new_record.save
end